<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–¢–µ—Å—Ç - —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ JavaScript?</title>
    <style>
        body { margin: 0; background: #0a1a28; color: white; font-family: sans-serif; }
        #info { padding: 20px; }
        button { padding: 10px 20px; margin: 5px; font-size: 16px; }
        canvas { display: block; margin: 20px auto; border: 2px solid white; background: #2a5f7a; }
    </style>
</head>
<body>
    <div id="info">
        <p>üí∞ –î–µ–Ω—å–≥–∏: <span id="money">1000</span></p>
        <p>üè† –ü–æ—Å—Ç—Ä–æ–µ–∫: <span id="count">0</span></p>
    </div>
    <canvas id="canvas" width="600" height="400"></canvas>
    <div>
        <button id="buildBtn">üè† –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–∏–∫</button>
        <button id="weatherBtn">üå¶Ô∏è –°–º–µ–Ω–∏—Ç—å –ø–æ–≥–æ–¥—É</button>
        <button id="resetBtn">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
    </div>

    <script>
        console.log('–°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const moneySpan = document.getElementById('money');
        const countSpan = document.getElementById('count');

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ
        let money = 1000;
        let buildings = [];
        let weather = 'clear'; // 'clear' –∏–ª–∏ 'rain'

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –ù–µ–±–æ
            ctx.fillStyle = weather === 'clear' ? '#87CEEB' : '#708090';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // –ó–µ–º–ª—è
            ctx.fillStyle = '#7cb57c';
            ctx.fillRect(0, canvas.height-50, canvas.width, 50);

            // –†–∏—Å—É–µ–º –¥–æ–º–∏–∫–∏
            buildings.forEach((b, index) => {
                let x = 50 + index * 80;
                if (x > canvas.width - 100) return; // –Ω–µ –≤—ã—Ö–æ–¥–∏–º –∑–∞ –∫—Ä–∞–π
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(x, canvas.height-100, 40, 50); // —Å—Ç–µ–Ω–∞
                ctx.fillStyle = '#D2691E';
                ctx.beginPath();
                ctx.moveTo(x-10, canvas.height-100);
                ctx.lineTo(x+50, canvas.height-100);
                ctx.lineTo(x+20, canvas.height-130);
                ctx.closePath();
                ctx.fill(); // –∫—Ä—ã—à–∞
                ctx.fillStyle = '#FFD700';
                ctx.fillRect(x+10, canvas.height-80, 10, 10); // –æ–∫–Ω–æ
            });

            // –≠—Ñ—Ñ–µ–∫—Ç –¥–æ–∂–¥—è
            if (weather === 'rain') {
                ctx.fillStyle = 'rgba(0,0,255,0.3)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç
            moneySpan.textContent = money;
            countSpan.textContent = buildings.length;
        }

        // –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–∏–∫
        document.getElementById('buildBtn').addEventListener('click', function() {
            if (money >= 200) {
                money -= 200;
                buildings.push({});
                draw();
            } else {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!');
            }
        });

        // –°–º–µ–Ω–∏—Ç—å –ø–æ–≥–æ–¥—É
        document.getElementById('weatherBtn').addEventListener('click', function() {
            weather = weather === 'clear' ? 'rain' : 'clear';
            draw();
        });

        // –°–±—Ä–æ—Å–∏—Ç—å
        document.getElementById('resetBtn').addEventListener('click', function() {
            money = 1000;
            buildings = [];
            draw();
        });

        // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
        draw();
        console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
    </script>
</body>
</html>
